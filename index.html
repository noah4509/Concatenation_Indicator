<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="trello-power-up-allowed-origins" content="https://trello.com">
    <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
  </head>
  <body>
    <script>
      // Initialize the Power-Up
      window.TrelloPowerUp.initialize({
        // Start by declaring the capabilities
        'board-buttons': function(t, options) {
          return [{
            icon: {
              dark: 'https://raw.githubusercontent.com/noah4509/Concatenation_Indicator/main/load.png',
              light: 'https://raw.githubusercontent.com/noah4509/Concatenation_Indicator/main/load.png'
            },
            text: 'Progress',
            callback: function(t) {
              return t.modal({
                url: './progress.html',
                height: 200,
                title: 'Progress Tracker'
              });
            }
          }];
        },
        'card-badges': function(t, options) {
          return t.get('card', 'shared', 'progress')
            .then(function(progress) {
              return [{
                icon: 'https://raw.githubusercontent.com/noah4509/Concatenation_Indicator/main/load.png',
                text: (progress || '0') + '%',
                color: progress === 100 ? 'green' : 'blue'
              }];
            });
        },
        'card-detail-badges': function(t, options) {
          return t.get('card', 'shared', 'progress')
            .then(function(progress) {
              return [{
                title: 'Progress',
                text: (progress || '0') + '%',
                color: progress === 100 ? 'green' : 'blue',
                callback: function(t) {
                  return t.popup({
                    title: 'Update Progress',
                    url: './progress.html',
                    height: 120
                  });
                }
              }];
            });
        }
      });
    </script>
  </body>
</html>