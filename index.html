<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="trello-power-up-allowed-origins" content="https://trello.com https://noah4509.github.io">
    <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
  </head>
  <body>
    <script>
      window.TrelloPowerUp.initialize({
        'card-badges': function(t, options) {
          return t.get('card', 'shared', '% COMPLETE')
            .then(function(progress) {
              return [{
                text: (progress || '0') + '%',
                color: progress === 100 ? 'green' : 'blue'
              }];
            });
        },
        'card-detail-badges': function(t, options) {
          return t.get('card', 'shared', '% COMPLETE')
            .then(function(progress) {
              return [{
                title: '% COMPLETE',
                text: (progress || '0') + '%',
                color: progress === 100 ? 'green' : 'blue',
                callback: function(t) {
                  return t.popup({
                    title: 'Update % Complete',
                    url: './progress.html',
                    height: 120
                  });
                }
              }];
            });
        }
      });
    </script>
  </body>
</html>
